<!doctype html>
 <head>	 
  <meta charset="utf-8">
  <title>Canadian Auto Insurance Claim Data</title>
  <meta name="author" content="">
  <meta name="description" content="">

  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/stepper.css">

  <script src="js/d3.v2.min.js"></script>
</head>
<body>
	
<script>
function myFunction() {
    document.getElementById("demo").innerHTML = "We have a database with details on Auto insurance Collision and Comprehensive Claims by  Year, Make, Model and Auto Body type. We want to design a visualization to find out first how Average number of Claims (Collision and Comprehensive)  changed over Manufactured year to see if there is any relation in between and next - Average Number of Collisions and Average Number of Comprehensive Claims aby Year, Make and Model to assess which type of Car may have potential for higher cost of insurance.Chart 1 - Shows Average number of Collision and Average Number of Comprehensive Claims against manufactured Years. Chart 2 - Shows Average number of Collision and Average Number of Comprehensive Claims by Year, Make and Model.";
}
</script>

<p align="left">
  <input type="button" onclick="myFunction()" value="About the Visualization" />
</p>

<p id="demo"></p>
	
  <div id="container">
    <h1>Canadian Auto Insurance Claim Data</h1>
    <h2 class="subtitle">Understanding the trend in Collision and Comprehensive Claims from Year 2003 to Year 2015</h2>
    <div id="vis-nav">
      <a href="#" id="step1" class="step-link active">Collisions Data by Make</a>
      <a href="#" id="step2" class="step-link">Comprehensive Data by Make</a>
      <a href="#" id="step3" class="step-link">Collision Data by Year</a>
      <a href="#" id="step4" class="step-link">Comprehensive Data by Year</a>
    </div>
    <div id="vis-container">
      
       <div id="annotation-steps">
        <div class="annotation-step" id="step1-annotation" style="display:block;">
          
<!-- CHART 1 STARTS--------------------------------------------------------------------------- -->
<!-- CHART 1 STARTS--------------------------------------------------------------------------- -->

<script src="https://d3js.org/d3.v4.min.js"></script>
<style>

.bar {
  fill: darkgreen;
}

.bar:hover {
  fill: violet;
}

.axis--x path {
  display: none;
}

.toolTip {
    position: absolute;
    display: none;
    min-width: 40px;
    height: auto;
    background: none repeat scroll 0 0 #ffffff;
    border: 1px solid #6F257F;
    padding: 14px;
    text-align: center;
}

</style>
<svg width="900" height="500"></svg>

<script>

var svg1 = d3.select("svg"),
    margin = {top: 30, right: 10, bottom: 100, left: 80},
    width = +svg1.attr("width") - margin.left - margin.right,
    height = +svg1.attr("height") - margin.top - margin.bottom;

var tooltip = d3.select("body").append("div").attr("class", "toolTip").style("z-index", "100");

var x = d3.scaleBand().rangeRound([0, width]).padding(0.1),
    y = d3.scaleLinear().rangeRound([height, 0]);
    


var g = svg1.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var data = [
{Make: "ACURA", Collisions: 114},
{Make: "AUDI", Collisions: 180.14},
{Make: "BMW", Collisions: 170.37},
{Make: "BUICK", Collisions: 67.85},
{Make: "BUICK/CHEV/GMC", Collisions: 95.07},
{Make: "BUICK/CHEVROLET", Collisions: 109},
{Make: "BUICK/SATURN", Collisions: 89},
{Make: "CADILLAC", Collisions: 122.39},
{Make: "CHEV/GMC/OLDS", Collisions: 52.5},
{Make: "CHEV/PONTIAC", Collisions: 72},
{Make: "CHEV/SATURN", Collisions: 53.33},
{Make: "CHEVROLET", Collisions: 78.74},
{Make: "CHEVROLET/GMC", Collisions: 82.86},
{Make: "CHRYSLER", Collisions: 85.5},
{Make: "CHRYSLER/DODGE", Collisions: 80.27},
{Make: "DODGE", Collisions: 104.06},
{Make: "FIAT", Collisions: 106.5},
{Make: "FORD", Collisions: 95.7},
{Make: "FORD/MERCURY", Collisions: 67.17},
{Make: "GMC", Collisions: 77.75},
{Make: "HONDA", Collisions: 97.53},
{Make: "HUMMER", Collisions: 78.57},
{Make: "HYUNDAI", Collisions: 97.35},
{Make: "INFINITI", Collisions: 146.17},
{Make: "JAGUAR", Collisions: 154.28},
{Make: "JEEP", Collisions: 94.5},
{Make: "KIA", Collisions: 96.53},
{Make: "LAND ROVER", Collisions: 188.84},
{Make: "LEXUS", Collisions: 142.73},
{Make: "LINCOLN", Collisions: 118.02},
{Make: "MAZDA", Collisions: 93.59},
{Make: "MERCEDES-BENZ", Collisions: 175.93},
{Make: "MINI", Collisions: 102.22},
{Make: "MITSUBISHI", Collisions: 140.5},
{Make: "NISSAN", Collisions: 114.75},
{Make: "OLDSMOBILE", Collisions: 37.25},
{Make: "PONTIAC", Collisions: 66.15},
{Make: "PONTIAC/SATURN", Collisions: 39},
{Make: "PORSCHE", Collisions: 218.88},
{Make: "SAAB", Collisions: 94},
{Make: "SATURN", Collisions: 70.56},
{Make: "SCION", Collisions: 158.14},
{Make: "SCION/SUBARU", Collisions: 305.5},
{Make: "SMART", Collisions: 55.77},
{Make: "SUBARU", Collisions: 103.02},
{Make: "SUZUKI", Collisions: 103.91},
{Make: "TOYOTA", Collisions: 100.58},
{Make: "VOLKSWAGEN", Collisions: 110.63},
{Make: "VOLVO", Collisions: 100.53}
];

  x.domain(data.map(function(d) { return d.Make; }));
  y.domain([0, d3.max(data, function(d) { return d.Collisions; })+50]);

  g.append("g")
      .attr("class", "axis axis--x")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x))
      .selectAll("text")  
      .style("text-anchor", "end")
      .attr("dx", "-.8em")
      .attr("dy", ".15em")
      .attr("transform", "rotate(-65)");;
  
  g.append("text")             
      .attr("transform",
            "translate(" + (width/2) + " ," + 
                           (height + margin.top + 20) + ")");
      //.style("text-anchor", "bottom")
      //.text("Make");
      //.attr("dx", "-.8em")
      //.attr("dy", ".15em")
      //.attr("transform", "rotate(-65)");
      
  g.append("text")
        .attr("x", (width / 2))             
        .attr("y", 0 - (margin.top) + 60)
        .attr("text-anchor", "middle")  
        .style("font-size", "16px") 
        .style("text-decoration", "underline")  
        .text("Make Vs Average # of Collisions");
        
  g.append("g")
      .attr("class", "axis axis--y")
      .call(d3.axisLeft(y).ticks(10))
      .append("text")
      .attr("transform", "rotate(-90)");
      
      
  g.append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 0 - margin.left + 25)
      .attr("x",0 - (height / 3))
      .attr("dy", "1em")
      .style("text-anchor", "middle")
      .text("Avergae # Of Collisions"); 
      

  g.selectAll(".bar")
    .data(data)
    .enter().append("rect")
      .attr("class", "bar")
      .attr("x", function(d) { return x(d.Make); })
      .attr("y", function(d) { return y(d.Collisions); })
      .attr("width", x.bandwidth())
      .attr("height", function(d) { return height - y(d.Collisions); })
      .on("mousemove", function(d){
            tooltip
              .style("left", d3.event.pageX - 50 + "px")
              .style("top", d3.event.pageY - 70 + "px")
              .style("display", "inline-block")
              .html((d.Make) + ":" + "\t" + (d.Collisions));
        })
    		.on("mouseout", function(d){ tooltip.style("display", "none");});
    		


</script>



	  

<!-- CHART 1 ENDS--------------------------------------------------------------------------- -->
<!-- CHART 1 ENDS--------------------------------------------------------------------------- -->
	 
          <p>This is the place to write the details for Page 1.</p>
        </div>
        <div class="annotation-step" id="step2-annotation">
          	  
		  
<!-- CHART 2 STARTS--------------------------------------------------------------------------- -->
<!-- CHART 2 STARTS--------------------------------------------------------------------------- -->

		  
    <title></title>
    <link rel="stylesheet" href="../base.css">
    <script src="//d3js.org/d3.v4.min.js" charset="utf-8"></script>
    <style>
     body {
     background-color: #F1F3F3    
     }
        .labels {
            fill: white;
        }
     
    .bar {
         fill: darkgreen;
         }

    .bar:hover {
         fill: brown;
    }  
    .rectangle {
	    fill: steelblue;
            }
    .rectangle:hover {
	    fill: orange;
    }
	    
    .toolTip {
    position: absolute;
    display: none;
    min-width: 10px;
    height: auto;
    background: none repeat scroll 0 0 #ffffff;
    border: 1px solid #6F257F;
    padding: 14px;
    text-align: center;
    }
	    
	    
    </style>

    <input onclick="update()" value="" style="display:none"/>
    <title>Text</title>
    <input value="50" min="0" max="100" id="maximum" style="display:none"/>
    <div id="vis">
    </div>
    
<script>

    
var width = 750;
var height = 650;

var maxValue = d3.select('#maximum')
    .node()
    .value;

var margin = {
    top: 40,
    left: 40,
    right: 0,
    bottom: 60
};

var svg = d3.select("#vis")
    .append("svg")
    .attr('width', width)
    .attr('height', height)
    .append("g")
    .attr("transform", "translate(" + margin.top + "," + margin.left + ")");
    
var tooltip = d3.select("body").append("div").attr("class", "toolTip");
width = width - margin.left - margin.right;
height = height - margin.top - margin.bottom;

var yscale = d3.scaleLinear()
    .range([height, 0])
    .domain([0,150]);

var xscale = d3.scaleBand()
    .domain([2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015])
    .range([0, width])
    .padding(0.1);
    

    
var duration = 1000;

var xaxis = d3.axisBottom(xscale);

var yaxis = d3.axisLeft(yscale);

svg.append('g')
    .attr('transform', 'translate(0, ' + (height) + ')')
    .attr('class', 'x axis');

svg.append('g')
    .attr('class', 'y axis');
    
svg.append("text")
        .attr("x", (width / 5))             
        .attr("y", 0 + 10 - (margin.top/20))
        .attr("text-anchor", "left")  
        .style("font-size", "15px") 
        .style("text-decoration", "underline")  
        .text("Average # of Collisions by Year");
        
svg.append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 0 - margin.left + 60)
      .attr("x",0 - (height / 3))
      .attr("dy", ".25em")
      .style("text-anchor", "top")
      .text("Collisions(Avg)"); 
      
svg.append("text")             
      .attr("transform",
            "translate(" + (width/2) + " ," + 
                           (height + margin.top + 20) + ")")
      .style("text-anchor", "bottom")
      .text("Year");

//function update() {

    maxValue = d3.select('#maximum')
        .node()
        .value;
    var exampleData = [64.33,72.24, 76.15,89.32,96.58,104.7,108.1,116.7,
                       123.3,135.1,146.5,154.5,144.4];
    var exampleData_2 = [2003,2004,2005,2006,2007,2008,2009,2010,2011,2012
                         ,2013,2014,2015];
    maxValue = d3.max(exampleData);

    //xscale.domain(d3.range(exampleData_2.length));
    xscale.domain(exampleData_2);
    //xscale.domain(["2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015"]);
    yscale.domain([0, maxValue]);

    var bars = svg.selectAll(".bar")
        .data(exampleData);

    bars
        .enter()
        .append('rect')
        .attr('class', 'bar')
        .attr("fill", "green")
        .attr('width', xscale.bandwidth())
        .attr('height', 0)
        .attr('y', height)
        .merge(bars)
        .attr("height", function(d, i) {
            return height - yscale(d);
        })
        .attr("y", function(d, i) {
            return yscale(d);
        })
        .attr("width", xscale.bandwidth())
        .attr("x", function(d, i) {
            return xscale(i+2003);
        })
	.on("mousemove", function(d, i){
            tooltip
              .style("left", d3.event.pageX - 50 + "px")
              .style("top", d3.event.pageY - 70 + "px")
              .style("display", "inline-block")
              .html("Y" + exampleData_2[i]+ ":" + "\t" + (height - yscale(d)));})
    	.on("mouseout", function(d){ tooltip.style("display", "none");});
        


    bars
        .exit()
        .transition()
        .duration(duration)
        .attr('height', 0)
        .attr('y', height)
        .remove();

    var labels = svg.selectAll('.label')
        .data(exampleData);

    var new_labels = labels
        .enter()
        .append('text')
        .attr('class', 'label')
        .attr('opacity', 0)
        .attr('y', height)
        .attr('fill', 'white')
        .attr('text-anchor', 'middle')

    new_labels.merge(labels)
        .transition()
        .duration(duration)
        .attr('opacity', 1)
        .attr('x', function(d, i) {
            return xscale(i+2003) + xscale.bandwidth() / 2;
        })
        .attr('y', function(d) {
            return yscale(d) + 20;
        })
        .text(function(d) {
            return d ;
        });

    labels
        .exit()
        .transition()
        .duration(duration)
        .attr('y', height)
        .attr('opacity', 0)
        .remove();

    svg.select('.x.axis')
        .transition()
        .duration(duration)
        .call(xaxis);

    svg.select('.y.axis')
        .transition()
        .duration(duration)
        .call(yaxis);
        
    



    </script>






<!-- CHART 2 ENDS--------------------------------------------------------------------------- -->
<!-- CHART 2 ENDS--------------------------------------------------------------------------- -->
            
            
          
                        
          <p>This is the place to write the details for Page 2.</p>
        </div>
        <div class="annotation-step" id="step3-annotation">
          <div class="annotation" id="step3-high-annotation" >
            <h4></h4>
            
<!-- CHART 3 STARTS--------------------------------------------------------------------------- -->
<!-- CHART 3 STARTS--------------------------------------------------------------------------- -->

<script src="//d3js.org/d3.v4.min.js" charset="utf-8"></script>
    <style>

    body {
     background-color: #F1F3F3    
    }
        .labels {
            fill: white;
        }
     
    
    .bar {
         fill: brown;
         }
    .bar:hover {
         fill: darkorange;
    }  
    .rectangle {
	    fill: steelblue;
            }
    .rectangle:hover {
	    fill: orange;
    }
	    
    .toolTip {
    position: absolute;
    display: none;
    min-width: 10px;
    height: auto;
    background: none repeat scroll 0 0 #ffffff;
    border: 1px solid #6F257F;
    padding: 14px;
    text-align: center;
    }
    </style>

    <input onclick="update()" value="" style="display:none"/>
    
    <input value="50" min="0" max="100" id="max3" style="display:none"/>
    <div id="vis3">
    </div>
    
<script>
    
var width = 900;
var height = 500;
var maxValue = d3.select('#max3')
    .node()
    .value;
var margin = {
    top: 30,
    left: 10,
    right: 20,
    bottom: 80
};
var svg3 = d3.select("#vis3")
    .append("svg")
    .attr('width', width)
    .attr('height', height)
    .append("g")
    .attr("transform", "translate(" + margin.top + "," + margin.left + ")");
var tooltip = d3.select("body").append("div").attr("class", "toolTip");    
width = width - margin.left - margin.right;
height = height - margin.top - margin.bottom;
var yscale = d3.scaleLinear()
    .range([height, 0])
    .domain([0,150]);
var xscale = d3.scaleBand()
    .range([0, width])
    .padding(0.1);
    
    
var duration = 1000;
var xaxis = d3.axisBottom(xscale);

var yaxis = d3.axisLeft(yscale);
svg3.append('g')
    .attr('transform', 'translate(0, ' + (height) + ')')
    .attr('class', 'x axis');
svg3.append('g')
    .attr('class', 'y axis');
    
svg3.append("text")
        .attr("x", (width / 15))             
        .attr("y", 0  - (margin.top/20) + 5)
        .attr("text-anchor", "left")  
        .style("font-size", "15px") 
        .style("text-decoration", "underline")  
        .text("Avg Number of Comprehensive Claims by Make");
        
svg3.append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 0 - margin.left + 25)
      .attr("x",0 - (height / 3))
      .attr("dy", ".2em")
      .style("text-anchor", "top")
      .text("Comp(Avg)"); 
      

//function update() {
    maxValue = d3.select('#max3')
        .node()
        .value;
var exampleData = [137.76,
151.36,
186.78,
62.23,
109.57,
104,
122.37,
164.49,
48.5,
70.1,
44,
79.12,
141.64,
90.82,
73.27,
156.08,
79.25,
139.28,
68.87,
110,
91.73,
241.37,
72.65,
130.34,
145.71,
108.92,
82.84,
319.42,
139.24,
122.59,
79.31,
159.51,
97.22,
125.15,
102.05,
38.4,
55.32,
56,
218.42,
104.85,
64.5,
105.85,
152.5,
47,
118.34,
64.71,
109.28,
98.71,
85.91
];

var exampleData_2 = ["ACURA",
"AUDI",
"BMW",
"BUICK",
"BUICK/CHEV/GMC",
"BUICK/CHEVROLET",
"BUICK/SATURN",
"CADILLAC",
"CHEV/GMC/OLDS",
"CHEV/PONTIAC",
"CHEV/SATURN",
"CHEVROLET",
"CHEVROLET/GMC",
"CHRYSLER",
"CHRYSLER/DODGE",
"DODGE",
"FIAT",
"FORD",
"FORD/MERCURY",
"GMC",
"HONDA",
"HUMMER",
"HYUNDAI",
"INFINITI",
"JAGUAR",
"JEEP",
"KIA",
"LAND ROVER",
"LEXUS",
"LINCOLN",
"MAZDA",
"MERCEDES-BENZ",
"MINI",
"MITSUBISHI",
"NISSAN",
"OLDSMOBILE",
"PONTIAC",
"PONTIAC/SATURN",
"PORSCHE",
"SAAB",
"SATURN",
"SCION",
"SCION/SUBARU",
"SMART",
"SUBARU",
"SUZUKI",
"TOYOTA",
"VOLKSWAGEN",
"VOLVO"
];


    maxValue = d3.max(exampleData);
    xscale.domain(d3.range(exampleData_2.length));
    //xscale.domain(exampleData_2);
    //xscale.domain(["2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015"]);
    yscale.domain([0, maxValue]);
    var bars = svg3.selectAll(".bar")
        .data(exampleData);
    bars
        .enter()
        .append('rect')
        .attr('class', 'bar')
        .attr("fill", "green")
        .attr('width', xscale.bandwidth())
        .attr('height', 0)
        .attr('y', height)
        .merge(bars)
        .attr("height", function(d, i) {
            return height - yscale(d);
        })
        .attr("y", function(d, i) {
            return yscale(d);
        })
        .attr("width", xscale.bandwidth())
        .attr("x", function(d,i) {
            return xscale(i);
        }).on("mousemove", function(d, i){
            tooltip
              .style("left", d3.event.pageX - 50 + "px")
              .style("top", d3.event.pageY - 70 + "px")
              .style("display", "inline-block")
              .html(exampleData_2[i]+ ":" + "\t" + (height - yscale(d)));
        })
    		.on("mouseout", function(d){ tooltip.style("display", "none");});
        
    bars
        .exit()
        .transition()
        .duration(duration)
        .attr('height', 0)
        .attr('y', height)
        .remove();
    
    xscale.domain(exampleData_2);
    
    svg3.select('.x.axis')
        .transition()
        .duration(duration)
        .call(xaxis)
        .selectAll("text")  
      .style("text-anchor", "end")
      .attr("dx", "-.8em")
      .attr("dy", ".15em")
      .attr("transform", "rotate(-65)");
      
      
    svg3.select('.y.axis')
        .transition()
        .duration(duration)
        .call(yaxis);
        
    
    </script>



		  
		  
<!-- CHART 3 ENDS--------------------------------------------------------------------------- -->
<!-- CHART 3 ENDS--------------------------------------------------------------------------- -->
                        


            
            
            <p>This is the place to write the details for Page 3.</p>
          </div>
          <div class="annotation" id="step3-low-annotation" >            
          </div>
        </div>
	<div class="annotation-step" id="step4-annotation">
          <div class="annotation" id="step4-high-annotation" >           
		  
		  
<!-- CHART 4 STARTS--------------------------------------------------------------------------- -->
<!-- CHART 4 STARTS--------------------------------------------------------------------------- -->

		  
    <script src="//d3js.org/d3.v4.min.js" charset="utf-8"></script>
    <style>
    body {
     background-color: #F1F3F3    
    }  
    .bar {
         fill: brown;
         }

    .bar:hover {
         fill: darkorange;
    }  
    .rectangle {
	    fill: steelblue;
            }
    .rectangle:hover {
	    fill: orange;
    }
    .toolTip {
    position: absolute;
    display: none;
    min-width: 10px;
    height: auto;
    background: none repeat scroll 0 0 #ffffff;
    border: 1px solid #6F257F;
    padding: 14px;
    text-align: center;
    }
    </style>

    <input onclick="update()" value="" style="display:none"/>
    
    <input value="50" min="0" max="100" id="max" style="display:none"/>
    <div id="vis2">
    </div>
    
<script>

    
var width = 750;
var height = 650;

var maxValue = d3.select('#max')
    .node()
    .value;

var margin = {
    top: 40,
    left: 40,
    right: 0,
    bottom: 60
};

var svg2 = d3.select("#vis2")
    .append("svg")
    .attr('width', width)
    .attr('height', height)
    .append("g")
    .attr("transform", "translate(" + margin.top + "," + margin.left + ")");
    
var tooltip = d3.select("body").append("div").attr("class", "toolTip");  

width = width - margin.left - margin.right;
height = height - margin.top - margin.bottom;

var yscale = d3.scaleLinear()
    .range([height, 0])
    .domain([0,150]);

var xscale = d3.scaleBand()
    .domain([2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015])
    .range([0, width])
    .padding(0.1);
    

    
var duration = 1000;

var xaxis = d3.axisBottom(xscale);

var yaxis = d3.axisLeft(yscale);

svg2.append('g')
    .attr('transform', 'translate(0, ' + (height) + ')')
    .attr('class', 'x axis');

svg2.append('g')
    .attr('class', 'y axis');
    
svg2.append("text")
        .attr("x", (width / 5))             
        .attr("y", 0 + 10 - (margin.top/20))
        .attr("text-anchor", "left")  
        .style("font-size", "15px") 
        .style("text-decoration", "underline")  
        .text("Average # of Comprehensive by Year");
        
svg2.append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 0 - margin.left + 60)
      .attr("x",0 - (height / 3))
      .attr("dy", ".25em")
      .style("text-anchor", "top")
      .text("Comprehensive(Avg)"); 
      
svg2.append("text")             
      .attr("transform",
            "translate(" + (width/2) + " ," + 
                           (height + margin.top + 20) + ")")
      .style("text-anchor", "bottom")
      .text("Year");

//function update() {

    maxValue = d3.select('#max')
        .node()
        .value;
    var exampleData = [69.96, 78.6,	87.23, 103.7, 110.7, 111.3, 110.1,
    119.3, 127.1, 138.1, 149.1, 164.1,	169.6];
    var exampleData_2 = [2003,2004,2005,2006,2007,2008,2009,2010,2011,2012
                         ,2013,2014,2015];
    maxValue = d3.max(exampleData);

    //xscale.domain(d3.range(exampleData_2.length));
    xscale.domain(exampleData_2);
    //xscale.domain(["2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015"]);
    yscale.domain([0, maxValue]);

    var bars = svg2.selectAll(".bar")
        .data(exampleData);

    bars
        .enter()
        .append('rect')
        .attr('class', 'bar')
        .attr("fill", "green")
        .attr('width', xscale.bandwidth())
        .attr('height', 0)
        .attr('y', height)
        .merge(bars)
        .attr("height", function(d, i) {
            return height - yscale(d);
        })
        .attr("y", function(d, i) {
            return yscale(d);
        })
        .attr("width", xscale.bandwidth())
        .attr("x", function(d, i) {
            return xscale(i+2003);
        }).on("mousemove", function(d, i){
            tooltip
              .style("left", d3.event.pageX - 50 + "px")
              .style("top", d3.event.pageY - 70 + "px")
              .style("display", "inline-block")
              .html("Y" + exampleData_2[i]+ ":" + "\t" + (height - yscale(d)));})
    	.on("mouseout", function(d){ tooltip.style("display", "none");});
        


    bars
        .exit()
        .transition()
        .duration(duration)
        .attr('height', 0)
        .attr('y', height)
        .remove();

    var labels = svg2.selectAll('.label')
        .data(exampleData);

    var new_labels = labels
        .enter()
        .append('text')
        .attr('class', 'label')
        .attr('opacity', 0)
        .attr('y', height)
        .attr('fill', 'white')
        .attr('text-anchor', 'middle')

    new_labels.merge(labels)
        .transition()
        .duration(duration)
        .attr('opacity', 1)
        .attr('x', function(d, i) {
            return xscale(i+2003) + xscale.bandwidth() / 2;
        })
        .attr('y', function(d) {
            return yscale(d) + 20;
        })
        .text(function(d) {
            return d ;
        });

    labels
        .exit()
        .transition()
        .duration(duration)
        .attr('y', height)
        .attr('opacity', 0)
        .remove();

    svg2.select('.x.axis')
        .transition()
        .duration(duration)
        .call(xaxis);

    svg2.select('.y.axis')
        .transition()
        .duration(duration)
        .call(yaxis);
        
    



    </script>


<!-- CHART 4 ENDS--------------------------------------------------------------------------- -->
<!-- CHART 4 ENDS--------------------------------------------------------------------------- -->
		  
            <p>This is the place to write the details for Page 4.</p>
          </div>
          <div class="annotation" id="step4-low-annotation" >
            </div>
        </div>
      </div>
      <div id="vis-canvas"></div>
    </div>
  </div>
  <script src="js/stepper.js"></script>
</body>
